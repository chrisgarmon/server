function exportsInit(){var f;var e=$("div[data-idBlock=export]");d();g();c();$("#blocks").on("panelDidAppear",function(h,i){if(i.blockId()=="export"&&typeof(queryObject)!="undefined"){if(!f){a();if(!$("div[data-idBlock=export] .exportMenu.active").length){$("div[data-idBlock=export] .exportMenu").first().trigger("click")}}}});function a(){e.find(".queryUniqueIdentifier").text(queryObject.get("uniqueIdentifier"));switch(queryObject.get("type")){case"retrieve":b();break}}function d(){$(document).on("click","div[data-idBlock=export] .decryptKey",function(){var h=$(this).parent().find(".public_key_value");modalMessage.getPublicKey("Will be used to decrypt your Public Key",function(i){if(i){h.html(i)}})})}function g(){function h(){new ModalAskInput("Please type the unique identifier that you want to set to this query",function(i){if(i){var j=i;queryH.changeUniqueIdentifier({queryId:queryObject.id,identifier:j},{success:function(k){queryObject=k;e.find(".queryUniqueIdentifier").text(queryObject.get("uniqueIdentifier"))},error:function(k){new ModalErrorParse(k,function(){window.setTimeout(function(){h()},500)})}})}})}$(document).on("click","div[data-idBlock=export] .changeIdentifier",function(){h()})}function c(){$(document).on("click","div[data-idBlock=export] .exportMenu",function(){$("div[data-idBlock=export] .exportMenu .panel").removeClass("active");var j=$(this);j.find(".panel").addClass("active");var h=$(this).attr("data-target");var i=$("#"+h);$("div[data-idBlock=export] .menuContent").animate({opacity:0},300,function(){$("div[data-idBlock=export] .menuContent").css("display","none");i.css("display","initial");i.animate({opacity:1},500)})})}function b(){e.find(".parameters").html("");var h=new Parse.Query("QueryRules");h.equalTo("query",queryObject);h.include("value");h.include("field");h.find({success:function(n){e.find("#rest .parameters").append("{");for(var k=0;k<n.length;k++){var l=n[k];var m;switch(l.get("field").get("type")){case"string":m='"Value"';break;case"number":m=0;break;case"date":var j=new Date();m=""+j.getFullYear()+"-"+j.getMonth()+"-"+j.getDate()+" "+j.getHours()+":"+j.getMinutes()+":"+j.getSeconds();break;case"boolean":m=true;break;case"unknown":m="unknown";break}if(l.get("value").get("type")=="variable"){e.find("#javascript .parameters").append('<code class="string">\''+l.get("value").get("valueConstant")+'\'</code><code class="plain">:</code> <code class="string">'+m+"</code>");e.find("#rest .parameters").append('<code class="string">\''+l.get("value").get("valueConstant")+'\'</code><code class="string">:</code> <code class="string">'+m+"</code>")}if(k<n.length-1){e.find("#javascript .parameters").append('<code class="plain">,</code> ');e.find("#rest .parameters").append('<code class="string">,</code> ')}}e.find("#rest .parameters").append("}")},error:function(i){console.log(i)}})}};