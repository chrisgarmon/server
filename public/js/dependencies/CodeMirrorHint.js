dependenciesLoader(["CodeMirror"],function(){!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(A){function m(c,a){this.cm=c,this.options=a,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var d=this;c.on("cursorActivity",this.activityFunc=function(){d.cursorActivity()})}function v(c,a,f){var l=c.options.hintOptions,h={};for(var d in w){h[d]=w[d]}if(l){for(var d in l){void 0!==l[d]&&(h[d]=l[d])}}if(f){for(var d in f){void 0!==f[d]&&(h[d]=f[d])}}return h.hint.resolve&&(h.hint=h.hint.resolve(c,a)),h}function j(a){return"string"==typeof a?a:a.text}function g(d,a){function l(c,i){var n;n="string"!=typeof i?function(e){return i(e,a)}:D.hasOwnProperty(i)?D[i]:i,f[c]=n}var D={Up:function(){a.moveFocus(-1)},Down:function(){a.moveFocus(1)},PageUp:function(){a.moveFocus(-a.menuSize()+1,!0)},PageDown:function(){a.moveFocus(a.menuSize()-1,!0)},Home:function(){a.setFocus(0)},End:function(){a.setFocus(a.length-1)},Enter:a.pick,Tab:a.pick,Esc:a.close},u=d.options.customKeys,f=u?{}:D;if(u){for(var C in u){u.hasOwnProperty(C)&&l(C,u[C])}}var h=d.options.extraKeys;if(h){for(var C in h){h.hasOwnProperty(C)&&l(C,h[C])}}return f}function B(c,a){for(;a&&a!=c;){if("LI"===a.nodeName.toUpperCase()&&a.parentNode==c){return a}a=a.parentNode}}function x(Q,W){this.completion=Q,this.data=W,this.picked=!1;var Y=this,K=Q.cm,R=this.hints=document.createElement("ul");R.className="CodeMirror-hints",this.selectedHint=W.selectedHint||0;for(var G=W.list,V=0;V<G.length;++V){var X=R.appendChild(document.createElement("li")),N=G[V],O=k+(V!=this.selectedHint?"":" "+y);null!=N.className&&(O=N.className+" "+O),X.className=O,N.render?N.render(X,W,N):X.appendChild(document.createTextNode(N.displayText||j(N))),X.hintId=V}var U=K.cursorCoords(Q.options.alignWithWord?W.from:null),F=U.left,o=U.bottom,D=!0;R.style.left=F+"px",R.style.top=o+"px";var P=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),J=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(Q.options.container||document.body).appendChild(R);var t=R.getBoundingClientRect(),Z=t.bottom-J;if(Z>0){var L=t.bottom-t.top,l=U.top-(U.bottom-t.top);if(l-L>0){R.style.top=(o=U.top-L)+"px",D=!1}else{if(L>J){R.style.height=J-5+"px",R.style.top=(o=U.bottom-t.top)+"px";var s=K.getCursor();W.from.ch!=s.ch&&(U=K.cursorCoords(s),R.style.left=(F=U.left)+"px",t=R.getBoundingClientRect())}}}var a=t.right-P;if(a>0&&(t.right-t.left>P&&(R.style.width=P-5+"px",a-=t.right-t.left-P),R.style.left=(F=U.left-a)+"px"),K.addKeyMap(this.keyMap=g(Q,{moveFocus:function(d,c){Y.changeActive(Y.selectedHint+d,c)},setFocus:function(c){Y.changeActive(c)},menuSize:function(){return Y.screenAmount()},length:G.length,close:function(){Q.close()},pick:function(){Y.pick()},data:W})),Q.options.closeOnUnfocus){var n;K.on("blur",this.onBlur=function(){n=setTimeout(function(){Q.close()},100)}),K.on("focus",this.onFocus=function(){clearTimeout(n)})}var I=K.getScrollInfo();return K.on("scroll",this.onScroll=function(){var c=K.getScrollInfo(),d=K.getWrapperElement().getBoundingClientRect(),h=o+I.top-c.top,f=h-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return D||(f+=R.offsetHeight),f<=d.top||f>=d.bottom?Q.close():(R.style.top=h+"px",void (R.style.left=F+I.left-c.left+"px"))}),A.on(R,"dblclick",function(d){var c=B(R,d.target||d.srcElement);c&&null!=c.hintId&&(Y.changeActive(c.hintId),Y.pick())}),A.on(R,"click",function(c){var d=B(R,c.target||c.srcElement);d&&null!=d.hintId&&(Y.changeActive(d.hintId),Q.options.completeOnSingleClick&&Y.pick())}),A.on(R,"mousedown",function(){setTimeout(function(){K.focus()},20)}),Q.options.completeOnSingleClick&&A.on(R,"mousemove",function(d){var c=B(R,d.target||d.srcElement);c&&null!=c.hintId&&Y.changeActive(c.hintId)}),A.signal(W,"select",G[0],R.firstChild),!0}function b(c,a){if(!c.somethingSelected()){return a}for(var d=[],f=0;f<a.length;f++){a[f].supportsSelection&&d.push(a[f])}return d}function p(a,l){var u,r=a.getHelpers(l,"hint");if(r.length){for(var f,t=!1,d=0;d<r.length;d++){r[d].async&&(t=!0)}return t?(f=function(h,c,C){function D(i,n){if(i==o.length){return c(null)}var e=o[i];if(e.async){e(h,function(s){s?c(s):D(i+1)},C)}else{var n=e(h,C);n?c(n):D(i+1)}}var o=b(h,r);D(0)},f.async=!0):f=function(h,c){for(var C=b(h,r),D=0;D<C.length;D++){var o=C[D](h,c);if(o&&o.list.length){return o}}},f.supportsSelection=!0,f}return(u=a.getHelper(a.getCursor(),"hintWords"))?function(c){return A.hint.fromList(c,{words:u})}:A.hint.anyword?function(c,h){return A.hint.anyword(c,h)}:function(){}}var k="CodeMirror-hint",y="CodeMirror-hint-active";A.showHint=function(c,a,d){if(!a){return c.showHint(d)}d&&d.async&&(a.async=!0);var h={hint:a};if(d){for(var f in d){h[f]=d[f]}}return c.showHint(h)},A.defineExtension("showHint",function(f){f=v(this,this.getCursor("start"),f);var d=this.listSelections();if(!(d.length>1)){if(this.somethingSelected()){if(!f.hint.supportsSelection){return}for(var a=0;a<d.length;a++){if(d[a].head.line!=d[a].anchor.line){return}}}this.state.completionActive&&this.state.completionActive.close();var e=this.state.completionActive=new m(this,f);e.options.hint&&(A.signal(this,"startCompletion",this),e.update(!0))}});var z=window.requestAnimationFrame||function(a){return setTimeout(a,1000/60)},q=window.cancelAnimationFrame||clearTimeout;m.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&A.signal(this.data,"close"),this.widget&&this.widget.close(),A.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,c){var d=a.list[c];d.hint?d.hint(this.cm,a,d):this.cm.replaceRange(j(d),d.from||a.from,d.to||a.to,"complete"),A.signal(a,"pick",d),this.close()},cursorActivity:function(){this.debounce&&(q(this.debounce),this.debounce=0);var c=this.cm.getCursor(),a=this.cm.getLine(c.line);if(c.line!=this.startPos.line||a.length-c.ch!=this.startLen-this.startPos.ch||c.ch<this.startPos.ch||this.cm.somethingSelected()||c.ch&&this.options.closeCharacters.test(a.charAt(c.ch-1))){this.close()}else{var d=this;this.debounce=z(function(){d.update()}),this.widget&&this.widget.disable()}},update:function(c){if(null!=this.tick){if(this.options.hint.async){var a=++this.tick,d=this;this.options.hint(this.cm,function(e){d.tick==a&&d.finishUpdate(e,c)},this.options)}else{this.finishUpdate(this.options.hint(this.cm,this.options),c)}}},finishUpdate:function(a,c){this.data&&A.signal(this.data,"update"),a&&this.data&&A.cmpPos(a.from,this.data.from)&&(a=null),this.data=a;var d=this.widget&&this.widget.picked||c&&this.options.completeSingle;this.widget&&this.widget.close(),a&&a.list.length&&(d&&1==a.list.length?this.pick(a,0):(this.widget=new x(this,a),A.signal(a,"shown")))}},x.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var a=this.completion.cm;this.completion.options.closeOnUnfocus&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var a=this;this.keyMap={Enter:function(){a.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a,c){if(a>=this.data.list.length?a=c?this.data.list.length-1:0:0>a&&(a=c?0:this.data.list.length-1),this.selectedHint!=a){var d=this.hints.childNodes[this.selectedHint];d.className=d.className.replace(" "+y,""),d=this.hints.childNodes[this.selectedHint=a],d.className+=" "+y,d.offsetTop<this.hints.scrollTop?this.hints.scrollTop=d.offsetTop-3:d.offsetTop+d.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=d.offsetTop+d.offsetHeight-this.hints.clientHeight+3),A.signal(this.data,"select",this.data.list[this.selectedHint],d)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},A.registerHelper("hint","auto",{resolve:p}),A.registerHelper("hint","fromList",function(C,E){var t=C.getCursor(),f=C.getTokenAt(t),H=A.Pos(t.line,f.end);if(f.string&&/\w/.test(f.string[f.string.length-1])){var F=f.string,d=A.Pos(t.line,f.start)}else{var F="",d=H}for(var D=[],u=0;u<E.words.length;u++){var G=E.words[u];G.slice(0,F.length)==F&&D.push(G)}return D.length?{list:D,from:d,to:H}:void 0}),A.commands.autocomplete=A.showHint;var w={hint:A.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};A.defineOption("hintOptions",null)});!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(A){function v(a,d){for(var c=0,f=a.length;f>c;++c){d(a[c])}}function b(a,d){if(!Array.prototype.indexOf){for(var c=a.length;c--;){if(a[c]===d){return !0}}return !1}return -1!=a.indexOf(d)}function j(t,l,D,a){var u=t.getCursor(),d=D(t,u);if(!/\b(?:string|comment)\b/.test(d.type)){d.state=A.innerMode(t.getMode(),d.state).state,/^[\w$_]*$/.test(d.string)?d.end>u.ch&&(d.end=u.ch,d.string=d.string.slice(0,u.ch-d.start)):d={start:u.ch,end:u.ch,string:"",state:d.state,type:"."==d.string?"property":null};for(var p=d;"property"==p.type;){if(p=D(t,k(u.line,p.start)),"."!=p.string){return}if(p=D(t,k(u.line,p.start)),!C){var C=[]}C.push(p)}return{list:y(d,C,l,a),from:k(u.line,d.start),to:k(u.line,d.end)}}}function m(a,c){return j(a,z,function(d,f){return d.getTokenAt(f)},c)}function h(a,d){var c=a.getTokenAt(d);return d.ch==c.start+1&&"."==c.string.charAt(0)?(c.end=c.start,c.string=".",c.type="property"):/^\.[\w$_]*$/.test(c.string)&&(c.type="property",c.start++,c.string=c.string.replace(/\./,"")),c}function B(a,c){return j(a,w,h,c)}function y(H,e,p,c){function I(a){0!=a.lastIndexOf(G,0)||b(f,a)||f.push(a)}function F(a){"string"==typeof a?v(q,I):a instanceof Array?v(x,I):a instanceof Function&&v(g,I);for(var d in a){I(d)}}var f=[],G=H.string,D=c&&c.globalScope||window;if(e&&e.length){var C,r=e.pop();for(r.type&&0===r.type.indexOf("variable")?(c&&c.additionalContext&&(C=c.additionalContext[r.string]),c&&c.useGlobalScope===!1||(C=C||D[r.string])):"string"==r.type?C="":"atom"==r.type?C=1:"function"==r.type&&(null==D.jQuery||"$"!=r.string&&"jQuery"!=r.string||"function"!=typeof D.jQuery?null!=D._&&"_"==r.string&&"function"==typeof D._&&(C=D._()):C=D.jQuery());null!=C&&e.length;){C=C[e.pop().string]}null!=C&&F(C)}else{for(var E=H.state.localVars;E;E=E.next){I(E.name)}for(var E=H.state.globalVars;E;E=E.next){I(E.name)}c&&c.useGlobalScope===!1||F(D),v(p,I)}return f}var k=A.Pos;A.registerHelper("hint","javascript",m),A.registerHelper("hint","coffeescript",B);var q="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),x="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),g="prototype apply call bind".split(" "),z="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),w="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")});!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(c){var b=/[\w$]+/,a=500;c.registerHelper("hint","anyword",function(j,t){for(var k=t&&t.word||b,z=t&&t.range||a,H=j.getCursor(),E=j.getLine(H.line),B=H.ch,r=B;r&&k.test(E.charAt(r-1));){--r}for(var A=r!=B&&E.slice(r,B),G=t&&t.list||[],e={},x=new RegExp(k.source,"g"),w=-1;1>=w;w+=2){for(var q=H.line,D=Math.min(Math.max(q+w*z,j.firstLine()),j.lastLine())+w;q!=D;q+=w){for(var C,F=j.getLine(q);C=x.exec(F);){(q!=H.line||C[0]!==A)&&(A&&0!=C[0].lastIndexOf(A,0)||Object.prototype.hasOwnProperty.call(e,C[0])||(e[C[0]]=!0,G.push(C[0])))}}}return{list:G,from:c.Pos(H.line,r),to:c.Pos(H.line,B)}})})});