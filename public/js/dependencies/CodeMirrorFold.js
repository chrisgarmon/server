dependenciesLoader(["CodeMirror"],function(){!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(f){function d(e,h,q,j){function g(s){var o=k(e,h);if(!o||o.to.line-o.from.line<p){return null}for(var l=e.findMarksAt(o.from),i=0;i<l.length;++i){if(l[i].__isFold&&"fold"!==j){if(!s){return null}o.cleared=!0,l[i].clear()}}return o}if(q&&q.call){var k=q;q=null}else{var k=b(e,q,"rangeFinder")}"number"==typeof h&&(h=f.Pos(h,0));var p=b(e,q,"minFoldSize"),n=g(!0);if(b(e,q,"scanUp")){for(;!n&&h.line>e.firstLine();){h=f.Pos(h.line-1,0),n=g(!1)}}if(n&&!n.cleared&&"unfold"!==j){var m=c(e,q);f.on(m,"mousedown",function(i){r.clear(),f.e_preventDefault(i)});var r=e.markText(n.from,n.to,{replacedWith:m,clearOnEnter:!0,__isFold:!0});r.on("clear",function(l,i){f.signal(e,"unfold",e,l,i)}),f.signal(e,"fold",e,n.from,n.to)}}function c(k,j){var h=b(k,j,"widget");if("string"==typeof h){var g=document.createTextNode(h);h=document.createElement("span"),h.appendChild(g),h.className="CodeMirror-foldmarker"}return h}function b(j,i,h){if(i&&void 0!==i[h]){return i[h]}var g=j.options.foldOptions;return g&&void 0!==g[h]?g[h]:a[h]}f.newFoldFunction=function(h,g){return function(j,e){d(j,e,{rangeFinder:h,widget:g})}},f.defineExtension("foldCode",function(i,h,g){d(this,i,h,g)}),f.defineExtension("isFolded",function(i){for(var h=this.findMarksAt(i),g=0;g<h.length;++g){if(h[g].__isFold){return !0}}}),f.commands.toggleFold=function(e){e.foldCode(e.getCursor())},f.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},f.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},f.commands.foldAll=function(e){e.operation(function(){for(var h=e.firstLine(),g=e.lastLine();g>=h;h++){e.foldCode(f.Pos(h,0),null,"fold")}})},f.commands.unfoldAll=function(e){e.operation(function(){for(var h=e.firstLine(),g=e.lastLine();g>=h;h++){e.foldCode(f.Pos(h,0),null,"unfold")}})},f.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(k,j){for(var h=0;h<e.length;++h){var g=e[h](k,j);if(g){return g}}}}),f.registerHelper("fold","auto",function(l,k){for(var j=l.getHelpers(k,"fold"),h=0;h<j.length;h++){var g=j[h](l,k);if(g){return g}}});var a={rangeFinder:f.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1};f.defineOption("foldOptions",null),f.defineExtension("foldOption",function(g,e){return b(this,g,e)})});!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],a):a(CodeMirror)}(function(g){function x(a){this.options=a,this.from=this.to=0}function p(a){return a===!0&&(a={}),null==a.gutter&&(a.gutter="CodeMirror-foldgutter"),null==a.indicatorOpen&&(a.indicatorOpen="CodeMirror-foldgutter-open"),null==a.indicatorFolded&&(a.indicatorFolded="CodeMirror-foldgutter-folded"),a}function b(f,a){for(var d=f.findMarksAt(s(a)),c=0;c<d.length;++c){if(d[c].__isFold&&d[c].find().from.line==a){return d[c]}}}function h(c){if("string"==typeof c){var a=document.createElement("div");return a.className=c+" CodeMirror-guttermarker-subtle",a}return c.cloneNode(!0)}function k(z,n,u){var l=z.state.foldGutter.options,r=n,y=z.foldOption(l,"minFoldSize"),c=z.foldOption(l,"rangeFinder");z.eachLine(n,u,function(f){var i=null;if(b(z,r)){i=h(l.indicatorFolded)}else{var d=s(r,0),a=c&&c(z,d);a&&a.to.line-a.from.line>=y&&(i=h(l.indicatorOpen))}z.setGutterMarker(f,l.gutter,i),++r})}function m(d){var a=d.getViewport(),c=d.state.foldGutter;c&&(d.operation(function(){k(d,a.from,a.to)}),c.from=a.from,c.to=a.to)}function q(r,c,l){var u=r.state.foldGutter;if(u){var a=u.options;if(l==a.gutter){var d=b(r,c);d?d.clear():r.foldCode(s(c,0),a.rangeFinder)}}}function v(d){var a=d.state.foldGutter;if(a){var c=a.options;a.from=a.to=0,clearTimeout(a.changeUpdate),a.changeUpdate=setTimeout(function(){m(d)},c.foldOnChangeTimeSpan||600)}}function w(d){var a=d.state.foldGutter;if(a){var c=a.options;clearTimeout(a.changeUpdate),a.changeUpdate=setTimeout(function(){var f=d.getViewport();a.from==a.to||f.from-a.to>20||a.from-f.to>20?m(d):d.operation(function(){f.from<a.from&&(k(d,f.from,a.from),a.from=f.from),f.to>a.to&&(k(d,a.to,f.to),a.to=f.to)})},c.updateViewportTimeSpan||400)}}function j(f,a){var d=f.state.foldGutter;if(d){var c=a.line;c>=d.from&&c<d.to&&k(f,c,c+1)}}g.defineOption("foldGutter",!1,function(c,d,a){a&&a!=g.Init&&(c.clearGutter(c.state.foldGutter.options.gutter),c.state.foldGutter=null,c.off("gutterClick",q),c.off("change",v),c.off("viewportChange",w),c.off("fold",j),c.off("unfold",j),c.off("swapDoc",m)),d&&(c.state.foldGutter=new x(p(d)),m(c),c.on("gutterClick",q),c.on("change",v),c.on("viewportChange",w),c.on("fold",j),c.on("unfold",j),c.on("swapDoc",m))});var s=g.Pos})});