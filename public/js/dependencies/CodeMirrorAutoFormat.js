dependenciesLoader(["CodeMirror"],function(){(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(b,c){return/^[;{}]$/.test(c)}});a.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,d,b,e){if(this.jsonMode){return/^[\[,{]$/.test(d)||/^}/.test(b)}else{if(d==";"&&e.lexical&&e.lexical.type==")"){return false}return/^[;{}]$/.test(d)&&!/^;/.test(b)}}});a.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(c,d,b){return c=="tag"&&/>$/.test(d)||/^</.test(b)}});a.defineExtension("commentRange",function(c,f,e){var b=this,d=a.innerMode(b.getMode(),b.getTokenAt(f).state).mode;b.operation(function(){if(c){b.replaceRange(d.commentEnd,e);b.replaceRange(d.commentStart,f);if(f.line==e.line&&f.ch==e.ch){b.setCursor(f.line,f.ch+d.commentStart.length)}}else{var i=b.getRange(f,e);var h=i.indexOf(d.commentStart);var g=i.lastIndexOf(d.commentEnd);if(h>-1&&g>-1&&g>h){i=i.substr(0,h)+i.substring(h+d.commentStart.length,g)+i.substr(g+d.commentEnd.length)}b.replaceRange(i,f,e)}})});a.defineExtension("autoIndentRange",function(d,c){var b=this;this.operation(function(){for(var e=d.line;e<=c.line;e++){b.indentLine(e,"smart")}})});a.defineExtension("autoFormatRange",function(j,k){var l=this;var p=l.getMode(),o=l.getRange(j,k).split("\n");var d=a.copyState(p,l.getTokenAt(j).state);var h=l.getOption("tabSize");var f="",r=0,b=j.ch==0;function e(){f+="\n";b=true;++r}for(var g=0;g<o.length;++g){var n=new a.StringStream(o[g],h);while(!n.eol()){var q=a.innerMode(p,d);var c=p.token(n,d),m=n.current();n.start=n.pos;if(!b||/\S/.test(m)){f+=m;b=false}if(!b&&q.mode.newlineAfterToken&&q.mode.newlineAfterToken(c,m,n.string.slice(n.pos)||o[g+1]||""||",",q.state)){e()}}if(!n.pos&&p.blankLine){p.blankLine(d)}if(!b){e()}}l.operation(function(){l.replaceRange(f,j,k);for(var s=j.line+1,i=j.line+r;s<=i;++s){l.indentLine(s,"smart")}l.setSelection(j,l.getCursor(false))})})})});